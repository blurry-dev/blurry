+++
"@type" = "WebPage"
name = "Templates: context"
+++

# Templates: context

Blurry populates Jinja templates with context from multiple sources:

1. `blurry.toml` configuration file, using `blurry.schema_data`:

    ```toml
    [blurry.schema_data.author]
    "@type" = "Person"
    givenName = "John"
    familyName = "Franey"
    url = "https://johnfraney.ca/"
    ```

2. Dynamic variables constructed by Blurry
3. Front matter from Markdown files

:::{note}
Markdown front matter takes precedence over variables of the same name from `blurry.toml` or those dynamically generated by Blurry.
:::

The template context variables are:

| Variable(s)              | Description                                                                                    |
| ------------------------ | ---------------------------------------------------------------------------------------------- |
| `body`                   | an HTML string converted from Markdown                                                         |
| `url`                    | the absolute URL for the given page                                                            |
| `thumbnailUrl`           | a path to the thumbnail version of the `image` front matter value                              |
| `schema_type_tag`        | a `<script type="application/ld+json">` tag containing Schema.org markup                       |
| `open_graph_tags`        | [Open Graph](https://ogp.me/) meta tags, like `<meta property="og:title" content="..." />`     |
| `**schema_variables`     | front matter from the Markdown file, like `datePublished`                                      |
| `**schema_data`          | Schema data from `blurry.toml`                                                                 |
| `sibling_pages`          | for `index.md` files, includes `[{"url", **MarkdownFileData}]` for files in the same directory |
| `file_data_by_directory` | `dict[Path, list[MarkdownFileData]]`                                                           |

:::{info}
`MarkdownFileData`'s type is:

@python<blurry.types.MarkdownFileData>
:::

```html
{% if sibling_pages %}
<h1>Posts</h1>

{% for page in sibling_pages|sort(reverse=true, attribute="datePublished") %}
<div>
  <img src="{{page.thumbnailUrl}}" loading="lazy">
  <h3><a href="{{ page.url }}">{{ page.headline }}</a></h3>
  <p>{{ page.abstract }}</p>
  <p><a href="{{ page.url }}">Continue reading &rarr;</a></p>
</div>
{% if not loop.last %}<hr>{% endif %}
{% endfor %}
{% endif %}
```
